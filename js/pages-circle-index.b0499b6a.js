(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-circle-index"],{2019:function(t,a,e){"use strict";e.r(a);var i=e("e333"),o=e("ff22d");for(var s in o)"default"!==s&&function(t){e.d(a,t,(function(){return o[t]}))}(s);e("3794");var n,c=e("f0c5"),r=Object(c["a"])(o["default"],i["b"],i["c"],!1,null,"6676e848",null,!1,i["a"],n);a["default"]=r.exports},3794:function(t,a,e){"use strict";var i=e("4b27"),o=e.n(i);o.a},"3e58":function(t,a,e){t.exports=e.p+"static/img/default-avatar.4b0fc020.png"},"4b27":function(t,a,e){var i=e("feac");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=e("4f06").default;o("29aa8928",i,!0,{sourceMap:!1,shadowMode:!1})},"6c16":function(t,a,e){"use strict";e("99af"),e("a434"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var i={data:function(){return{terms:[],termtype:"hot",topics:{data:[]},loadingStatus:!0,loadmore:"waiting",paged:1,loadLocked:!1}},onReachBottom:function(){this.getTopics()},onPullDownRefresh:function(){this.paged=1,this.getTopics()},onLoad:function(){var t=this;uni.$on("reloadTopicData",(function(a){t.reloadData(a)})),this.loadingStatus&&this.getTopics()},created:function(){var t=this;uni.$on("getTopicData",(function(a){t.addNewTopic(a)}))},onShareAppMessage:function(t){return{title:this.opt.mNames.circle_name,path:"/pages/circle/index"}},onReady:function(){uni.setNavigationBarTitle({title:this.opt.mNames.circle_name})},onUnload:function(){uni.$off("getTopicData"),uni.$off("deleteTopic"),uni.$off("reloadTopicData")},computed:{userData:function(){return this.$store.state.userData},token:function(){return this.$store.state.token},opt:function(){return this.$store.state.opt}},methods:{reloadData:function(t){var a=this;uni.request({method:"post",url:this.$store.state.restUrlNormal+"getDataByTopicId",header:this.$store.state.headerToken,data:{topic_id:this.topics.data.data[t].topic_id},success:function(e){"403"!=e.statusCode&&a.$set(a.topics.data.data,t,e.data)}})},deleteTopic:function(t){this.topics.data.data.splice(t,1)},updateData:function(t,a,e){var i=this;"vote"==a&&t&&t.then((function(t){i.$set(i.topics.data.data[e].meta.vote,"up",i.topics.data.data[e].meta.vote.up+t.up),i.$set(i.topics.data.data[e].meta.vote,"down",i.topics.data.data[e].meta.vote.down+t.down),t.up>0?i.$set(i.topics.data.data[e].meta.vote,"isset_up",!0):i.$set(i.topics.data.data[e].meta.vote,"isset_up",!1),t.down>0?i.$set(i.topics.data.data[e].meta.vote,"isset_down",!0):i.$set(i.topics.data.data[e].meta.vote,"isset_down",!1),i.$set(i.topics.data.data[e].meta.vote,"locked",!1)}))},addNewTopic:function(t){this.topics.data.data.unshift(t)},poTopic:function(){this.token?this.go("/pages/circle/po-topic"):this.go("/pages/global/login")},getTopics:function(){var t=this;this.loadLocked||(this.paged>1&&(this.loadmore=!0),uni.request({method:"post",url:this.$store.state.restUrl+"getCircleIndex",header:this.$store.state.headerToken,data:{paged:this.paged,type:"all",role:"all",file:"all"},success:function(a){403!=a.statusCode&&(1==t.paged?(t.terms=a.data.terms,t.topics.data=a.data.topics,t.termtype=a.data.term_type,t.topics.hidden=!0,t.loadingStatus=!1):a.data.topics.data.length>0?t.topics.data.data=t.topics.data.data.concat(a.data.topics.data):(t.loadLocked=!0,t.loadmore=!1),t.paged++,uni.stopPullDownRefresh())}}))}}};a.default=i},e333:function(t,a,e){"use strict";var i;e.d(a,"b",(function(){return o})),e.d(a,"c",(function(){return s})),e.d(a,"a",(function(){return i}));var o=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("v-uni-view",{staticClass:"page-content circle-index"},[t.loadingStatus?i("b2Loading",{attrs:{status:t.loadingStatus}}):[i("v-uni-view",{staticClass:"circle-term"},[i("v-uni-view",{staticClass:"t-top flex-center b2mg"},["hot"==t.termtype?i("v-uni-view",[t._v("热门"+t._s(t.opt.mNames.circle_name))]):i("v-uni-view",[t._v("我加入的"+t._s(t.opt.mNames.circle_name))]),i("v-uni-view",{staticClass:"more-button",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.go("/pages/circle/all-circle")}}},[t._v("查看更多"),i("b2font",{attrs:{type:"b2arrow-right-s-line",size:"30"}})],1)],1),i("v-uni-view",{staticClass:"t-list flex-center"},[i("v-uni-scroll-view",{staticClass:"scroll-view_H",attrs:{"scroll-x":"true","scroll-left":"0"}},t._l(t.terms,(function(a,e){return i("v-uni-view",{key:e,staticClass:"t-l-l t-item b2radius",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.go("/pages/circle/category?id="+a.id)}}},[i("v-uni-view",{staticClass:"count bold"},[t._v(t._s(t.nFormatter(a.topic_count)))]),i("v-uni-view",{staticClass:"c-info"},[i("v-uni-view",{staticClass:"c-info-in"},[i("v-uni-text",{staticClass:"t-n lin-1 lin-2",domProps:{textContent:t._s(a.name)}}),i("v-uni-view",{staticClass:"t-m"},[i("v-uni-text",[t._v(t._s(t.opt.mNames.circle_member)+" "+t._s(t.nFormatter(a.user_count)))])],1)],1)],1),i("v-uni-image",{staticClass:"t-i b2radius",attrs:{src:a.icon,"lazy-load":!0,mode:"aspectFill"}})],1)})),1)],1)],1),i("v-uni-view",{staticClass:"po-topic",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.poTopic.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"p-t flex-center"},[t.userData.avatar?i("v-uni-view",[i("v-uni-image",{staticClass:"avatar",attrs:{"lazy-load":!0,src:t.userData.avatar}})],1):i("v-uni-view",[i("v-uni-image",{staticClass:"avatar",attrs:{"lazy-load":!0,src:e("3e58")}})],1),i("v-uni-view",{staticClass:"p-area"},[t._v("分享点新鲜事...")])],1),i("v-uni-view",{staticClass:"p-tools flex-center"},[i("v-uni-view",{staticClass:"say flex-center"},[i("b2font",{attrs:{type:"b2image-fill",size:"40"}}),i("v-uni-text",{staticClass:"bold-light"},[t._v("图片")])],1),i("v-uni-view",{staticClass:"ask flex-center"},[i("b2font",{attrs:{type:"b2movie-fill",size:"40"}}),i("v-uni-text",{staticClass:"bold-light"},[t._v("视频")])],1),i("v-uni-view",{staticClass:"vote flex-center"},[i("b2font",{attrs:{type:"b2bar-chart-fill",size:"40"}}),i("v-uni-text",{staticClass:"bold-light"},[t._v("投票")])],1),i("v-uni-view",{staticClass:"guess flex-center"},[i("b2font",{attrs:{type:"b2heart-pulse-line",size:"40"}}),i("v-uni-text",{staticClass:"bold-light"},[t._v("你猜")])],1)],1)],1),i("v-uni-view",[i("b2topic",{attrs:{list:t.topics,vtype:"image"},on:{update:function(a){arguments[0]=a=t.$handleEvent(a),t.updateData.apply(void 0,arguments)},deleteTopic:function(a){arguments[0]=a=t.$handleEvent(a),t.deleteTopic.apply(void 0,arguments)}}}),i("b2bottom",{attrs:{loadmore:t.loadmore}})],1)]],2)},s=[]},feac:function(t,a,e){var i=e("24fb");a=i(!1),a.push([t.i,".scroll-view_H[data-v-6676e848]{white-space:nowrap;height:%?172?%}.page-content[data-v-6676e848]{background-color:#f6f6f6;height:100%}.t-top[data-v-6676e848]{justify-content:space-between;font-size:%?28?%;margin-bottom:%?24?%;padding-top:%?24?%}.t-item[data-v-6676e848]:nth-child(1){margin-left:%?24?%}.t-item[data-v-6676e848]{width:%?132?%;height:%?172?%;display:inline-block;background:#f5f6f7;position:relative;border-radius:%?8?%}.t-item + .t-item[data-v-6676e848]{margin-left:%?24?%}.t-list[data-v-6676e848]{margin-bottom:%?30?%}.po-topic[data-v-6676e848]{margin:%?20?% 0;padding:%?20?% %?32?%;background-color:#fff}.p-t .avatar[data-v-6676e848]{width:%?70?%;height:%?70?%;margin-right:%?16?%;border-radius:100%;display:block}.p-area[data-v-6676e848]{border:1px solid #e8e8e8;width:100%;height:%?68?%;border-radius:%?8?%;line-height:%?68?%;font-size:%?28?%;color:#c0cade;padding-left:%?16?%}.dot[data-v-6676e848]{margin:0 %?10?%}.count[data-v-6676e848]{position:absolute;right:%?0?%;top:%?0?%;background-color:#fff;z-index:3;font-size:%?22?%;height:%?30?%;line-height:%?30?%;padding:0 %?16?%;color:#7d7d7d;border-bottom-left-radius:%?20?%}.c-info[data-v-6676e848]{position:absolute;height:100%;width:100%;left:0;top:0;background:linear-gradient(180deg,transparent,rgba(0,0,0,.5));white-space:break-spaces;z-index:3;color:#fff}.c-info-in[data-v-6676e848]{position:absolute;bottom:0;padding:%?16?%;width:100%;box-sizing:border-box}.t-m[data-v-6676e848]{font-size:%?20?%;font-weight:700;display:flex;opacity:.7}.t-n[data-v-6676e848]{font-size:%?20?%;font-weight:700;margin-bottom:%?8?%}.t-i[data-v-6676e848]{position:absolute;top:0;left:0;width:100%;height:100%;z-index:1}.say .b2font[data-v-6676e848]{color:#4caf50}.ask .b2font[data-v-6676e848]{color:#f35}.guess .b2font[data-v-6676e848]{color:#ffa41b}.vote .b2font[data-v-6676e848]{color:#1a85ff}.p-tools[data-v-6676e848]{margin-top:%?24?%;font-size:%?28?%}.p-tools .flex-center[data-v-6676e848]{width:25%;justify-content:center}.p-tools .flex-center + .flex-center[data-v-6676e848]{border-left:1px solid #e8e8e8}.p-tools .b2font[data-v-6676e848]{margin-right:%?8?%;font-weight:400}",""]),t.exports=a},ff22d:function(t,a,e){"use strict";e.r(a);var i=e("6c16"),o=e.n(i);for(var s in i)"default"!==s&&function(t){e.d(a,t,(function(){return i[t]}))}(s);a["default"]=o.a}}]);